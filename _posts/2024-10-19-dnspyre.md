---
layout: post
title: "Load testing DNS servers and resolvers from your CLI"
categories: misc
---

During my tenure at [Jamf](https://www.jamf.com/), where I was part of the team responsible for the development
and maintenance of the DNS resolvers powering Secure DNS solutions (like [Jamf Safe Internet](https://www.jamf.com/products/jamf-safe-internet/)).
I often required some way to quickly execute a simple to more advanced load tests of the DNS resolvers and preferably
from my CLI.

While popular DNS load testing tools like [DNSPerf](https://github.com/DNS-OARC/dnsperf)
and [DNSBlast](https://github.com/jedisct1/dnsblast) exist,
I found they lacked features I wanted, such as more advanced DNS protocols (like DNS over HTTPS, DNS over TLS and DNS
over QUIC),
high concurrency of the load tests, randomization of the DNS queries, etc. This led me to
create [dnspyre](https://tantalor93.github.io/dnspyre/),
designed to address these gaps and provide a more flexible and comprehensive DNS load testing solution, purpose-built
for command-line use.

dnspyre began as a fork of the [dnstrace](https://github.com/redsift/dnstrace) tool, command-line benchmark for DNS
servers.
The original tool, written in a Go, handled concurrent load generation well but was no longer actively maintained.
Seeing its potential and wanting to add new features, I decided to fork dnstrace and create dnspyre.

<div>
    <figure>
        <a href="https://tantalor93.github.io/dnspyre/">
            <img src="{{ site.baseurl }}/assets/images/dnspyre-blog-logo.png" alt="dnspyre logo">
        </a>
        <figcaption>dnspyre logo</figcaption>
    </figure>
</div>


dnspyre is a command-line DNS benchmark tool available for MacOS, Linux and Windows.
It supports DNS benchmarking across various protocols, including traditional DNS over UDP/TCP,
DNS over HTTPS, DNS over TLS, and DNS over QUIC. The tool offers a range of configuration options, such as
concurrency control, rate-limiting of DNS queries, and connection sharing, allowing users to tailor load tests
for different scenarios.

<div>
    <figure>
        <img src="{{ site.baseurl }}/assets/images/dnspyre-blog-example.png" alt="dnspyre example">
        <figcaption>example of DoH Benchmark</figcaption>
    </figure>
</div>